<UserControl
	x:Class="JocysCom.VS.AiCompanion.Engine.Controls.McpServerItemControl"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:JcConverters="clr-namespace:JocysCom.ClassLibrary.Controls.Converters"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:local="clr-namespace:JocysCom.VS.AiCompanion.Engine.Controls"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	x:Name="This"
	d:DesignHeight="450"
	d:DesignWidth="800"
	Loaded="This_Loaded"
	mc:Ignorable="d">
	<UserControl.Resources>
		<ResourceDictionary>
			<ResourceDictionary.MergedDictionaries>
				<ResourceDictionary Source="../JocysCom/Controls/Themes/Icons.xaml" />
				<ResourceDictionary Source="../Resources/Icons/Icons_Default.xaml" />
				<ResourceDictionary Source="../JocysCom/Controls/Themes/Default.xaml" />
				<ResourceDictionary Source="../Resources/MainResources.xaml" />
			</ResourceDictionary.MergedDictionaries>
			<JcConverters:BoolToVisibilityConverter x:Key="_BoolToVisibilityConverter" />
		</ResourceDictionary>
	</UserControl.Resources>
	<Grid Opacity="{Binding ControlOpacity}">
		<Grid.RowDefinitions>
			<RowDefinition Height="auto" />
			<RowDefinition Height="auto" />
		</Grid.RowDefinitions>
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="auto" />
			<ColumnDefinition Width="*" />
		</Grid.ColumnDefinitions>
		<ContentControl
			Name="ServerIcon"
			Grid.Row="0"
			Width="32"
			Height="32"
			Margin="8,8,8,4"
			Padding="0"
			VerticalAlignment="Top"
			Content="{StaticResource Icon_gearwheel}" />
		<StackPanel
			Grid.Row="0"
			Grid.Column="1"
			Margin="0,4,0,4"
			HorizontalAlignment="Stretch"
			Orientation="Vertical">
			<StackPanel Margin="0,4,4,4">
				<CheckBox
					Name="ServerEnabledCheckBox"
					Margin="-4"
					x:FieldModifier="public"
					IsChecked="{Binding Path=Enabled}">
					<CheckBox.Content>
						<StackPanel Orientation="Horizontal">
							<Label
								Margin="0"
								Padding="0"
								Content="{Binding ServerId}"
								FontWeight="Bold"
								Foreground="#74531F" />
							<Label
								Margin="8,0,0,0"
								Padding="0"
								Content="{Binding Transport}"
								FontWeight="Normal"
								Foreground="#808080" />
						</StackPanel>
					</CheckBox.Content>
				</CheckBox>
			</StackPanel>
			<TextBlock
				Name="ServerDescriptionLabel"
				Margin="0,0,4,4"
				Text="{Binding ServerDefinition.Description}"
				TextWrapping="Wrap" />

			<!-- Server Configuration Details -->
			<StackPanel Margin="0,4,4,4">
				<StackPanel Orientation="Horizontal" Margin="24,2,0,2">
					<Label Content="Command:" FontWeight="Bold" Margin="0" Padding="0" />
					<Label Content="{Binding ServerDefinition.Command}" Margin="4,0,0,0" Padding="0" />
				</StackPanel>
				<StackPanel Orientation="Horizontal" Margin="24,2,0,2">
					<Label Content="Args:" FontWeight="Bold" Margin="0" Padding="0" />
					<ItemsControl ItemsSource="{Binding ServerDefinition.Args}" Margin="4,0,0,0">
						<ItemsControl.ItemsPanel>
							<ItemsPanelTemplate>
								<StackPanel Orientation="Horizontal" />
							</ItemsPanelTemplate>
						</ItemsControl.ItemsPanel>
						<ItemsControl.ItemTemplate>
							<DataTemplate>
								<Label Content="{Binding}" Margin="0,0,4,0" Padding="0" />
							</DataTemplate>
						</ItemsControl.ItemTemplate>
					</ItemsControl>
				</StackPanel>
				<StackPanel Orientation="Horizontal" Margin="24,2,0,2">
					<Label Content="Working Directory:" FontWeight="Bold" Margin="0" Padding="0" />
					<Label Content="{Binding ServerDefinition.Cwd}" Margin="4,0,0,0" Padding="0" />
				</StackPanel>
				<StackPanel Orientation="Horizontal" Margin="24,2,0,2">
					<Label Content="URL:" FontWeight="Bold" Margin="0" Padding="0" />
					<Label Content="{Binding ServerDefinition.Url}" Margin="4,0,0,0" Padding="0" />
				</StackPanel>
			</StackPanel>

			<!-- Server Options -->
			<StackPanel Margin="0,4,4,4">
				<StackPanel Orientation="Horizontal" Margin="24,2,0,2">
					<CheckBox Content="Auto Start" IsChecked="{Binding AutoStart}" Margin="0,0,16,0" />
					<CheckBox Content="Auto Restart" IsChecked="{Binding AutoRestart}" Margin="0,0,16,0" />
				</StackPanel>
				<StackPanel Orientation="Horizontal" Margin="24,2,0,2">
					<Label Content="Max Risk Level:" FontWeight="Bold" Margin="0" Padding="0" />
					<Label Content="{Binding MaxRiskLevel}" Margin="4,0,16,0" Padding="0" />
					<Label Content="Approval Process:" FontWeight="Bold" Margin="0" Padding="0" />
					<Label Content="{Binding ApprovalProcess}" Margin="4,0,0,0" Padding="0" />
				</StackPanel>
			</StackPanel>
		</StackPanel>
		<Border
			x:Name="SeparatorBorder"
			Grid.Row="1"
			Grid.ColumnSpan="2"
			Margin="4,0,4,0"
			x:FieldModifier="public"
			BorderBrush="{StaticResource BackgroundDark}"
			BorderThickness="0,0,0,1" />
	</Grid>
</UserControl>
